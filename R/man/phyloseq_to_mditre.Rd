% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/phyloseq_loader.R
\name{phyloseq_to_mditre}
\alias{phyloseq_to_mditre}
\title{Convert phyloseq Object to MDITRE Format}
\usage{
phyloseq_to_mditre(
  ps_data,
  subject_col,
  time_col,
  label_col,
  normalize = TRUE,
  min_prevalence = 0.1,
  min_abundance = 1e-04,
  log_transform = FALSE
)
}
\arguments{
\item{ps_data}{A phyloseq object containing OTU table, sample data, and
phylogenetic tree}

\item{subject_col}{Character. Column name in sample_data identifying subjects}

\item{time_col}{Character. Column name in sample_data with time points}

\item{label_col}{Character. Column name in sample_data with binary labels (0/1)}

\item{normalize}{Logical. Whether to normalize OTU abundances (default: TRUE)}

\item{min_prevalence}{Numeric. Minimum prevalence threshold for OTU filtering (default: 0.1)}

\item{min_abundance}{Numeric. Minimum abundance threshold for OTU filtering (default: 0.0001)}

\item{log_transform}{Logical. Whether to log-transform abundances (default: FALSE)}
}
\value{
A list with components:
\itemize{
\item \code{X}: torch tensor of shape (n_subjects, n_otus, n_timepoints)
\item \code{y}: torch tensor of shape (n_subjects) with binary labels
\item \code{times}: torch tensor of shape (n_subjects, n_timepoints)
\item \code{mask}: torch tensor indicating valid timepoints
\item \code{phylo_dist}: phylogenetic distance matrix (n_otus, n_otus)
\item \code{phylo_tree}: ape phylo object
\item \code{metadata}: list with additional information
}
}
\description{
Converts a phyloseq object containing microbiome time-series data into
the tensor format required by MDITRE models.
}
\examples{
\dontrun{
library(phyloseq)
library(torch)

# Load phyloseq data
data("GlobalPatterns")

# Convert to MDITRE format
mditre_data <- phyloseq_to_mditre(
  GlobalPatterns,
  subject_col = "SampleType",
  time_col = "Description",
  label_col = "Label"
)

# Access components
X <- mditre_data$X  # Abundance tensors
y <- mditre_data$y  # Labels
dist <- mditre_data$phylo_dist  # Distance matrix
}
}

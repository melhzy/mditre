[pytest]
# Pytest configuration for MDITRE test suite

# Register custom markers to avoid warnings
markers =
    architecture: Tests for model architecture components
    layer1: Tests for Layer 1 (Phylogenetic Focus)
    layer2: Tests for Layer 2 (Temporal Focus)
    layer3: Tests for Layer 3 (Detectors)
    layer4: Tests for Layer 4 (Rules)
    layer5: Tests for Layer 5 (Classification)
    differentiability: Tests for gradient flow and differentiability
    critical: Critical tests that must pass
    model: Tests for complete models (MDITRE/MDITREAbun)
    metrics: Tests for performance metrics computation
    integration: Integration tests for full workflows
    gpu: Tests that require GPU/CUDA
    slow: Slow-running tests
    phylogenetic: Tests for phylogenetic focus mechanisms
    temporal: Tests for temporal focus mechanisms
    interpretability: Tests for interpretability features
    data: Tests for data processing and loading
    performance: Tests for performance benchmarking
    scalability: Tests for scalability analysis

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options
console_output_style = progress
addopts = 
    -v
    --tb=short
    --strict-markers
    -ra

# Warning filters
filterwarnings =
    # Ignore ete3's cgi deprecation warning (external library issue, fixed in future ete3 versions)
    ignore:.*cgi.*is deprecated.*:DeprecationWarning:ete3.*
    # Our own deprecation warnings should still be shown (intentional for backward compatibility tests)
    default::DeprecationWarning:mditre.*

# Minimum version
minversion = 6.0
